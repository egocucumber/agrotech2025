# ПОЯСНИТЕЛЬНАЯ ЗАПИСКА

## 1. ВВЕДЕНИЕ

**Наименование программы:** Экосистема агротехники в поле для учета и мониторинга зерна (AgroVzor)

**Условное обозначение темы разработки:** Разработка программно-аппаратного комплекса для обеспечения автоматизации взаимодействия комбайна, бункера-перегрузчика и зерновоза в процессе осуществления трехзвенной уборки урожая и мониторинга перемещения зерна между машин.

**Документы, на основании которых ведется разработка:**

1. Программа «Студенческий стартап (VI очередь)» Фонда Содействия Инновациям
   - Организация: Фонд Содействия Инновациям (Фонд Бортника)
   - Дата утверждения: 2024 год

2. Федеральный закон от 26.12.2024 №499-ФЗ «О зерне»

3. Указ Президента Российской Федерации от 07.05.2024 г. № 309 «О национальных целях развития Российской Федерации на период до 2030 года»

4. Программа «Цифровое сельское хозяйство» Минсельхоза РФ

## 2. НАЗНАЧЕНИЕ И ОБЛАСТЬ ПРИМЕНЕНИЯ

**2.1. Назначение программы:**

Программа предназначена для автоматизации и мониторинга процесса трехзвенной уборки урожая зерновых культур. Система обеспечивает:

- Автоматизированное взаимодействие между комбайном, бункером-перегрузчиком и зерновозом
- Сквозной учет зерна от момента уборки до передачи на транспортное средство
- Автоматическую координацию действий механизаторов
- Анализ потерь зерна, мониторинг состояния техники и эффективности работы персонала
- Визуализацию данных и формирование отчетов

**2.2. Область применения:**

Программа применяется в следующих типах организаций:

- Крупные и средние агрохолдинги (использующие двух- и трехзвенную уборку)
- Фермерские хозяйства (от 500+ га, с высокой долей зерновых культур)
- Зернотрейдеры и элеваторы (заинтересованные в прозрачности логистики и учёта)
- Сервисные компании (предлагающие агротехнический аутсорсинг)
- Производители сельскохозяйственной техники (для OEM-интеграции)

**Целевая аудитория:**
- Оценочное количество потребителей в России: ~2,5–3 тыс. агропредприятий (с посевными площадями от 1 тыс. га)
- ~15–20 тыс. фермерских хозяйств (потенциально масштабируемых)
- ~500 элеваторов и зернотрейдеров

## 3. ТЕХНИЧЕСКИЕ ХАРАКТЕРИСТИКИ

### 3.1. Постановка задачи на разработку программы

**3.1.1. Описание проблемы:**

В современном сельском хозяйстве на крупных агрохолдингах принято использовать двухзвенную схему уборки поля, что несет потери в скорости уборки поля и нерационального использования техники. Переход к трехзвенной схеме уборки (использование бункера-перегрузчика) помогает ускорить уборку и увеличить прирост на 7–12%, но при этом:

- Увеличивается количество техники, что ведет к увеличению процента потерь зерна при транспортировке, кражах и недоучете
- Учет производится вручную, что замедляет процесс уборки
- Увеличивается время на уборку из-за неэффективного взаимодействия участников процесса
- Отсутствуют инструменты для автоматической фиксации и мониторинга собираемого урожая
- Существующие решения зависят от спутниковых систем и мобильной связи, которые нестабильны в удаленных полях
- Зарубежные решения (например, John Deere) стали недоступными на территории России

**3.1.2. Математические методы и алгоритмы:**

**Расчет потерь зерна:**
- Анализ данных о весе и уровне заполненности бункера
- Сравнение фактических показателей с ожидаемыми
- Расчет процента потерь: `lossPercentage = (expectedWeight - actualWeight) / expectedWeight * 100`
- Расчет веса потерянного зерна: `lossWeight = expectedWeight - actualWeight`

**Детекция аномалий вибрации:**
- Анализ массива значений вибрации
- Вычисление среднего значения: `average = sum(values) / count(values)`
- Сравнение с пороговым значением (100): `anomalyDetected = average > threshold`

**Детекция кражи топлива:**
- Сравнение текущего уровня топлива с предыдущим
- Расчет падения уровня: `drop = previousLevel - currentLevel`
- Расчет процента падения: `dropPercentage = (drop / previousLevel) * 100`
- Детекция кражи: `theftDetected = dropPercentage > 10 AND timeInterval < threshold`

**Расчет индекса эффективности оператора:**
- Показатель движения (30% веса): анализ изменения координат
- Время реакции (40% веса): анализ времени отклика на вызовы
- Эффективность выгрузки (30% веса): анализ количества и качества циклов выгрузки
- Общий индекс: `overallIndex = movementScore * 0.3 + responseTimeScore * 0.4 + unloadScore * 0.3`

**3.1.3. Допущения и ограничения:**

**Допущения:**
- Бортовые модули установлены и настроены корректно
- Датчики калиброваны и работают в допустимых пределах
- Связь между модулями и сервером периодически восстанавливается
- Операторы используют систему согласно инструкциям

**Ограничения:**
- Система предназначена для работы с зерновыми, масличными и другими сыпучими культурами
- Требуется наличие бортовых модулей для полной функциональности
- Точность расчетов зависит от качества данных с датчиков
- Работа в автономном режиме ограничена объемом локального хранилища

### 3.2. Описание алгоритма и функционирования программы

**3.2.1. Архитектура решения:**

Программа реализует клиент-серверную архитектуру с разделением на:

1. **Серверная часть (Backend):**
   - REST API на Spring Boot
   - База данных PostgreSQL
   - Обработка телеметрических данных
   - Аналитические расчеты

2. **Клиентская часть (Frontend):**
   - Веб-интерфейс на Next.js/React
   - Визуализация данных
   - Управление через веб-браузер

3. **Бортовые модули (Hardware):**
   - Сбор данных с датчиков
   - Локальное хранение при отсутствии связи
   - Передача данных на сервер

**3.2.2. Алгоритм работы системы:**

**Инициализация:**
1. Загрузка конфигурации
2. Подключение к базе данных
3. Инициализация Spring Boot контекста
4. Автоматическое создание/обновление схемы БД

**Обработка запросов:**
1. Получение HTTP-запроса через контроллер
2. Валидация входных данных
3. Вызов соответствующего сервиса
4. Обработка бизнес-логики
5. Преобразование Entity в DTO
6. Возврат JSON-ответа

**Обработка телеметрии:**
1. Прием регулярных пакетов данных
2. Сохранение в базу данных
3. Анализ данных на предмет аномалий
4. Расчет аналитических показателей
5. Генерация уведомлений при необходимости

**Синхронизация данных:**
1. Обнаружение восстановления связи
2. Передача накопленных локально данных
3. Синхронизация с сервером
4. Обновление состояния системы

**3.2.3. Взаимодействие с другими программами:**

- **База данных PostgreSQL:** Хранение всех данных через JDBC и Spring Data JPA
- **ФГИС «Зерно»:** Интеграция для автоматической отчетности (планируется)
- **ERP-системы (1С, SAP):** Интеграция через REST API (планируется)
- **Бортовые модули:** Прием данных через HTTP REST API

### 3.3. Описание и обоснование выбора метода организации входных и выходных данных

**3.3.1. Организация входных данных:**

**Формат JSON выбран по следующим причинам:**
- Универсальность и широкое распространение
- Легкость парсинга и генерации
- Поддержка встроенными средствами языков программирования
- Человекочитаемый формат для отладки
- Эффективное использование сетевых ресурсов

**Структура входных данных:**
- Иерархическая структура объектов и массивов
- Типизированные поля (строки, числа, булевы значения)
- Вложенные объекты для сложных структур
- Массивы для списков данных

**Валидация данных:**
- Проверка обязательных полей
- Проверка типов данных
- Проверка диапазонов значений
- Проверка форматов (UUID, даты, координаты)

**3.3.2. Организация выходных данных:**

**Формат JSON для API:**
- Единообразие с входными данными
- Легкость обработки на клиенте
- Поддержка различных типов данных

**Визуализация в веб-интерфейсе:**
- HTML/CSS для структуры и стилей
- JavaScript/React для интерактивности
- Графики через библиотеку Recharts
- Карты через библиотеку Leaflet

**3.3.3. Кодирование данных:**

- Кодировка: UTF-8 (поддержка кириллицы и других языков)
- Формат дат: ISO 8601 (YYYY-MM-DDTHH:mm:ss)
- Координаты: десятичные градусы (широта, долгота)
- UUID: стандартный формат (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx)

### 3.4. Описание и обоснование выбора состава технических и программных средств

**3.4.1. Технические средства:**

**Серверная часть:**
- **Java 17:** Современная версия с улучшенной производительностью, поддержка долгосрочных релизов
- **Spring Boot 4.0.0:** Фреймворк для быстрой разработки, встроенная конфигурация, автоматическая настройка
- **PostgreSQL 16:** Надежная реляционная СУБД с поддержкой транзакций, открытый исходный код, высокая производительность

**Клиентская часть:**
- **Next.js 16.0.3:** React-фреймворк с серверным рендерингом, оптимизацией производительности, удобной маршрутизацией
- **React 19.2.0:** Библиотека для построения пользовательских интерфейсов, компонентный подход, виртуальный DOM
- **TypeScript 5:** Типизированный JavaScript, повышение надежности кода, улучшение разработки

**3.4.2. Программные средства:**

**Библиотеки и инструменты:**
- **Spring Data JPA:** Упрощение работы с БД, автоматическая генерация запросов
- **SpringDoc OpenAPI:** Автоматическая генерация API документации
- **Recharts:** Библиотека для построения графиков, совместимость с React
- **Leaflet:** Библиотека для работы с картами, открытый исходный код, легковесность
- **Docker:** Контейнеризация для упрощения развертывания и масштабирования

**3.4.3. Распределение носителей данных:**

- **База данных PostgreSQL:** Основное хранилище всех данных
- **Оперативная память:** Кэширование часто используемых данных
- **Локальное хранилище бортовых модулей:** Временное хранение при отсутствии связи
- **Файловая система сервера:** Хранение логов, резервных копий, статических файлов

## 4. ОЖИДАЕМЫЕ ТЕХНИКО-ЭКОНОМИЧЕСКИЕ ПОКАЗАТЕЛИ

### 4.1. Технико-экономические показатели, обосновывающие выбранный вариант технического решения

**4.1.1. Технические показатели:**

- Снижение потерь зерна на 15-30%
- Оптимизация логистики и сокращение простоев техники на 20-40%
- Экономия топлива до 500 л дизеля/сезон на 1 комбайн
- Увеличение обрабатываемых площадей на 10-15% без расширения парка машин
- Снижение потребности в дополнительном персонале (экономия до 1 млн руб./сезон на хозяйство)

**4.1.2. Экономические показатели:**

**Для сельхозпредприятий:**
- Сохранение 3-5 тонн зерна с каждого гектара (при урожайности 3,5-4 т/га)
- Дополнительный доход: ~15-25 тыс. руб./га (при цене зерна 5-7 руб./кг)
- Срок окупаемости: 1-2 сезона уборки урожая

**Для отрасли в целом:**
- Внедрение на 50% крупных хозяйств → +7-10 млн тонн сохранённого зерна/год
- В денежном выражении: до +150 млрд руб./год

**4.1.3. Социальные показатели:**

- Снижение нагрузки на механизаторов
- Повышение престижа профессии
- Создание новых рабочих мест для IT-специалистов
- Соответствие национальным целям развития

### 4.2. Ожидаемые оперативные показатели

- Время отклика API: не более 500 мс
- Время обработки телеметрических пакетов: не более 100 мс
- Время расчета аналитических показателей: не более 2 секунд
- Коэффициент готовности системы: не менее 99%
- Время восстановления после отказа: не более 5 минут

## 5. ИСТОЧНИКИ, ИСПОЛЬЗОВАННЫЕ ПРИ РАЗРАБОТКЕ

### 5.1. Нормативно-технические документы

1. ГОСТ 19.ххх серии - Единая система программной документации
2. Федеральный закон от 26.12.2024 №499-ФЗ «О зерне»
3. Указ Президента Российской Федерации от 07.05.2024 г. № 309
4. Программа «Цифровое сельское хозяйство» Минсельхоза РФ

### 5.2. Научно-технические публикации

1. Документация Spring Boot Framework
2. Документация Next.js Framework
3. Документация PostgreSQL
4. Документация React
5. Документация TypeScript

### 5.3. Другие источники

1. Письма поддержки от завода ООО "Бонум"
2. Письма поддержки от Минсельхоз РО
3. Письма поддержки от сельхозпредприятий
4. Анализ существующих решений для мониторинга сельскохозяйственной техники
5. Исследование потребностей агропредприятий в автоматизации уборки урожая

## ПРИЛОЖЕНИЯ

**Приложение А. Таблицы технических характеристик**

Содержит подробные таблицы с техническими характеристиками системы, требованиями к оборудованию, параметрами производительности.

**Приложение Б. Обоснования выбора технологий**

Содержит детальные обоснования выбора каждой используемой технологии, сравнение альтернативных решений.

**Приложение В. Методики расчетов**

Содержит подробные описания математических методов и алгоритмов, используемых в системе, с примерами расчетов.

**Приложение Г. Схемы и диаграммы**

Содержит схемы архитектуры системы, диаграммы взаимодействия компонентов, ER-диаграммы базы данных.

